# 中国公募基金实时净值估算系统

这是一个基于 Python 的项目，旨在实时估算中国公募基金的盘中净值涨跌幅。

## 功能特点

*   **实时数据获取**：
    *   从 **天天基金网 (EastMoney)** 抓取基金的前十大重仓股持仓数据。
    *   从 **新浪财经 (Sina Finance)** 获取 A 股及 ETF 的实时行情。
*   **智能估算**：
    *   **智能估算**：
    *   **股票型基金**：支持 **A股**、**港股 (HK)**、**美股 (US)** 混合持仓估算。
    *   **ETF 联接/商品基金**：自动识别 ETF 联接基金，追踪其底层目标 ETF。
*   **可视化界面**：
    *   使用 **Streamlit** 构建。
    *   支持批量输入基金代码。
    *   表格展示实时涨跌幅估算。
    *   **持仓披露日期**：显示所用持仓数据的来源季度。
    *   **双重图表**：
        *   📈 **实时分时走势**：记录日内估值波动（橙色曲线）。
        *   📅 **历史净值走势**：官方单位净值趋势，支持多时间范围切换。
    *   **现代化 UI**：关键指标卡片化展示，持仓详情支持高亮。
    *   **高性能并发**：支持多线程并发获取数据，大幅缩短刷新时间。
    *   支持查看每只基金的重仓股实时详情。
    *   支持 60 秒自动刷新。

## 目录结构

```
Fund_nav/
├── app.py              # Streamlit 主程序入口
├── requirements.txt    # 项目依赖
├── src/
│   ├── data_fetcher.py # 数据获取模块 (爬虫与 API)
│   └── valuation.py    # 估值逻辑模块
└── README.md           # 项目说明文档
```

## 安装与运行

### 1. 环境准备
建议使用 Python 3.8+。

安装依赖：
```bash
pip install -r requirements.txt
```

### 2. 运行系统
在项目根目录下执行：

```bash
streamlit run app.py
```

终端会显示访问地址（通常为 `http://localhost:8501`），在浏览器中打开即可。

## 使用说明

1.  **输入代码**：在左侧侧边栏的文本框中输入基金代码，使用英文逗号分隔。
    *   示例：`110011, 000001, 161725, 002611`
2.  **查看结果**：中间表格将显示每只基金的估算涨跌幅。
    *   **红色**：代表上涨。
    *   **绿色**：代表下跌。
3.  **查看详情**：点击下方的选项卡，可以查看特定基金的前十大重仓股实时表现。
4.  **自动刷新**：勾选侧边栏的“自动刷新”复选框，页面将每分钟自动更新一次。

## 注意事项

*   **数据延迟**：数据来源于免费公开接口，可能存在轻微延迟。
*   **估算误差**：对于股票型基金，估算仅基于公开的**前十大重仓股**（通常占净值的 40%-60%），因此结果仅供参考，不代表最终实际净值。
*   **QDII 支持**：目前的版本主要针对 A 股资产。对于持有大量港股或美股的 QDII 基金，若无法从新浪接口获取对应代码，可能导致估算偏差。

## 免责声明

本项目仅供个人学习和研究使用，不构成任何投资建议。
